<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Meghadutam: The Cloud's Journey</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link href="https://unpkg.com/maplibre-gl@3.5.2/dist/maplibre-gl.css" rel="stylesheet" />

<style>
html, body {
    margin: 0;
    height: 100%;
    font-family: "Georgia", serif;
    background: #1b1a17;
    color: #e7dfcf;
}

#map {
    width: 100%;
    height: 100vh;
}

/* Title */
#title {
    position: absolute;
    top: 20px;
    width: 100%;
    text-align: center;
    font-size: 28px;
    letter-spacing: 1px;
    color: #e6d8b8;
    z-index: 10;
    pointer-events: none;
}

/* Intro Modal */
#intro {
    position: absolute;
    inset: 0;
    background: rgba(20,18,15,0.92);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 20;
}

#intro-box {
    background: #2a2621;
    border: 1px solid #a08d64;
    padding: 32px;
    max-width: 420px;
    text-align: center;
    box-shadow: 0 0 30px rgba(0,0,0,0.6);
}

#intro h2 {
    margin-top: 0;
    color: #e8d9b0;
}

.intro-btn {
    margin: 12px 6px 0;
    padding: 10px 18px;
    background: #b9a06b;
    color: #1b1a17;
    border: none;
    cursor: pointer;
    font-size: 14px;
}

.intro-btn:hover {
    background: #d5be85;
}

/* Marker */
.marker {
    width: 26px;
    height: 26px;
    background: #d8c49a;
    border: 2px solid #3b3325;
    border-radius: 50%;
    cursor: pointer;
}

/* Popup */
.maplibregl-popup-content {
    background: #2b2823;
    color: #e9dec5;
    border: 1px solid #9f8c5c;
    font-family: Georgia, serif;
    max-width: 260px;
}

.maplibregl-popup-content img {
    width: 100%;
    margin-bottom: 8px;
    border-radius: 4px;
}
</style>
</head>

<body>

<div id="title">Meghadutam: The Cloud's Journey</div>
<div id="map"></div>

<div id="intro">
    <div id="intro-box">
        <h2>Svāgatam</h2>
        <p>
            Follow the cloud’s ancient path across sacred landscapes,
            where poetry, geography, and memory converge.
        </p>
        <button class="intro-btn" onclick="startJourney()">Begin the Journey</button>
        <button class="intro-btn" onclick="window.open('https://example.com','_blank')">
            Read the Introduction
        </button>
    </div>
</div>

<script src="https://unpkg.com/maplibre-gl@3.5.2/dist/maplibre-gl.js"></script>

<script>
const locations = [
    {
        name: "Ramtek",
        coords: [79.327, 21.397],
        image: "https://upload.wikimedia.org/wikipedia/commons/5/5b/Ramtek_Temple.jpg",
        text: "The cloud begins its journey from the hills sacred to Rama."
    },
    {
        name: "Amarkantak",
        coords: [81.753, 22.676],
        image: "https://upload.wikimedia.org/wikipedia/commons/1/1e/Amarkantak.jpg",
        text: "Source of rivers, cradle of forests and myth."
    },
    {
        name: "Vidisha",
        coords: [77.807, 23.526],
        image: "https://upload.wikimedia.org/wikipedia/commons/3/3e/Vidisha_India.jpg",
        text: "A crossroads of culture and empire."
    },
    {
        name: "Udayagiri",
        coords: [77.736, 23.536],
        image: "https://upload.wikimedia.org/wikipedia/commons/6/6a/Udayagiri_caves.jpg",
        text: "Caves where stone learned to speak divinity."
    },
    {
        name: "Ujjain",
        coords: [75.784, 23.179],
        image: "https://upload.wikimedia.org/wikipedia/commons/9/98/Mahakaleshwar_Temple_Ujjain.jpg",
        text: "The heart of time, where the cloud rests."
    }
];

let map;
let currentIndex = 0;

map = new maplibregl.Map({
    container: 'map',
    style: 'https://api.maptiler.com/maps/satellite/style.json?key=2KLPs3v6SocVNHhNtM9X',
    center: [78, 22],
    zoom: 5
});

function createMarker(location, index) {
    const el = document.createElement('div');
    el.className = 'marker';

    const popup = new maplibregl.Popup({ offset: 25 })
        .setHTML(`
            <h3>${location.name}</h3>
            <img src="${location.image}" />
            <p>${location.text}</p>
        `);

    el.addEventListener('click', () => {
        popup.addTo(map);
        popup.setLngLat(location.coords);
        currentIndex = index;
    });

    new maplibregl.Marker(el)
        .setLngLat(location.coords)
        .addTo(map);
}

locations.forEach(createMarker);

function startJourney() {
    document.getElementById('intro').style.display = 'none';
    flyToLocation(0);
}

function flyToLocation(index) {
    const loc = locations[index];
    map.flyTo({
        center: loc.coords,
        zoom: 8,
        speed: 0.8,
        curve: 1.4
    });
}
</script>

</body>
</html>
